{"version":3,"sources":["../../src/utilities/bindHttpMethod.js"],"names":["originalMethod","agent","args","url","options","callback","http","globalAgent","https"],"mappings":";;;;;;;AAEA;;AACA;;;;AAIA;wBACgBA,c,EAA0BC,K,KAAqB;AAC7D;AACA,SAAO,CAAC,GAAGC,IAAJ,KAAgB;AACrB,QAAIC,GAAJ;AACA,QAAIC,OAAJ;AACA,QAAIC,QAAJ;;AAEA,QAAI,OAAOH,IAAI,CAAC,CAAD,CAAX,KAAmB,QAAvB,EAAiC;AAC/BC,MAAAA,GAAG,GAAGD,IAAI,CAAC,CAAD,CAAV;;AAEA,UAAI,OAAOA,IAAI,CAAC,CAAD,CAAX,KAAmB,UAAvB,EAAmC;AACjCE,QAAAA,OAAO,GAAG,EAAV;AACAC,QAAAA,QAAQ,GAAGH,IAAI,CAAC,CAAD,CAAf;AACD,OAHD,MAGO;AACLE,QAAAA,OAAO,GAAG,EACR,GAAGF,IAAI,CAAC,CAAD;AADC,SAAV;AAGAG,QAAAA,QAAQ,GAAGH,IAAI,CAAC,CAAD,CAAf;AACD;AACF,KAZD,MAYO;AACLE,MAAAA,OAAO,GAAG,EACR,GAAGF,IAAI,CAAC,CAAD;AADC,OAAV;AAGAG,MAAAA,QAAQ,GAAGH,IAAI,CAAC,CAAD,CAAf;AACD;;AAED,QAAI,CAACE,OAAO,CAACH,KAAb,EAAoB;AAClBG,MAAAA,OAAO,CAACH,KAAR,GAAgBA,KAAhB;AACD,KA1BoB,CA4BrB;;;AACA,QAAIG,OAAO,CAACH,KAAR,KAAkBK,cAAKC,WAAvB,IAAsCH,OAAO,CAACH,KAAR,KAAkBO,eAAMD,WAAlE,EAA+E;AAC7EH,MAAAA,OAAO,CAACH,KAAR,GAAgBA,KAAhB;AACD;;AAED,QAAIE,GAAJ,EAAS;AACP;AACA,aAAOH,cAAc,CAACG,GAAD,EAAMC,OAAN,EAAeC,QAAf,CAArB;AACD,KAHD,MAGO;AACL,aAAOL,cAAc,CAACI,OAAD,EAAUC,QAAV,CAArB;AACD;AACF,GAvCD;AAwCD,C","sourcesContent":["// @flow\n\nimport http from 'http';\nimport https from 'https';\n\ntype AgentType = http.Agent | https.Agent;\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport default (originalMethod: Function, agent: AgentType) => {\n  // eslint-disable-next-line unicorn/prevent-abbreviations\n  return (...args: *) => {\n    let url;\n    let options;\n    let callback;\n\n    if (typeof args[0] === 'string') {\n      url = args[0];\n\n      if (typeof args[1] === 'function') {\n        options = {};\n        callback = args[1];\n      } else {\n        options = {\n          ...args[1]\n        };\n        callback = args[2];\n      }\n    } else {\n      options = {\n        ...args[0]\n      };\n      callback = args[1];\n    }\n\n    if (!options.agent) {\n      options.agent = agent;\n    }\n\n    // `request` module sets `agent` property to `http.globalAgent`/ `https.globalAgent` by default.\n    if (options.agent === http.globalAgent || options.agent === https.globalAgent) {\n      options.agent = agent;\n    }\n\n    if (url) {\n      // $FlowFixMe\n      return originalMethod(url, options, callback);\n    } else {\n      return originalMethod(options, callback);\n    }\n  };\n};\n"],"file":"bindHttpMethod.js"}